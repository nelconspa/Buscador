import{_ as A,a as p,b as i,d as r,h as m,t as C,e as d,w as I,f as k,aK as G,r as v,aL as j,aQ as z,aT as Q,o as X,n as L,aW as q,F as S,g as N,aX as P,aY as J,aZ as ee,a_ as $,a$ as E,b0 as H,b1 as te,c as le}from"./index-BlFMA_Ff.js";const ae={name:"MultiSelectInput",props:{parameter:Object},data(){return{fail:!1,failMsg:"",selectedOptions:[],option_id:null}},mounted(){this.selectedOptions=this.parameter.tipo_dato.tipo_dato_contenido},methods:{}},oe={class:"mt-3"};function ne(g,c,t,h,l,T){const a=p("v-select"),_=p("CAlert");return i(),r("div",null,[m("label",oe,"Multiselect "+C(t.parameter.nombre),1),d(a,{modelValue:l.option_id,"onUpdate:modelValue":c[0]||(c[0]=s=>l.option_id=s),placeholder:"Seleccione...",options:l.selectedOptions,reduce:s=>s.id,label:"nombre",multiple:""},null,8,["modelValue","options","reduce"]),d(_,{color:"danger",visible:l.fail,dismissible:"",onClose:c[1]||(c[1]=()=>{l.fail=!1})},{default:I(()=>[k(C(l.failMsg),1)]),_:1},8,["visible"])])}const ue=A(ae,[["render",ne]]),se=["onClick"],ie={class:"tag-input"},re={class:"options"},ce=["onClick"],pe={key:0,class:"count"},de=G({name:"TagInput",__name:"TagInput",props:{modelValue:{default:()=>[]},options:{},allowCustom:{type:Boolean,default:!0},validator:{},validationMessage:{default:"Invalid tag: custom tags not allowed"},autocompleteItems:{},autocompleteKey:{default:"id"},showCount:{type:Boolean,default:!1},tagTextColor:{default:"white"},tagBgColor:{default:"rgb(120, 54, 10)"},tagClass:{default:""},customDelimiter:{default:()=>[]},singleLine:{type:Boolean,default:!1},inputProps:{}},emits:["update:modelValue"],setup(g,{emit:c}){const t=g,h=c,l=v(t.modelValue),T=v(t.tagClass),a=v(""),_=v(!1),s=v(-1),y=j(()=>[...new Set((typeof t.customDelimiter=="string"?t.customDelimiter.split(""):t.customDelimiter).flatMap(e=>e.split("")))]),b=v(null),D=e=>{b.value=e,setTimeout(()=>b.value=null,1e3),a.value=""},x=v(!1);function B(){x.value=!0,setTimeout(()=>x.value=!1,500);let e=a.value;y.value.includes(e.charAt(e.length-1))&&(a.value=e.slice(0,e.length-1))}const f=v(void 0);z(a,async()=>{s.value=-1,f.value=t.autocompleteItems?Array.isArray(t.autocompleteItems)?t.autocompleteItems:await t.autocompleteItems(a.value):t.options});const u=j(()=>f.value?f.value.filter(e=>a.value&&!l.value.includes(e)&&e.match(new RegExp(a.value,"i"))):[]),V=e=>{var o;if(console.log(e,f.value,u.value),e=e.trim(),!e){B();return}if(l.value.includes(e)){D(e);return}if(t.validator instanceof RegExp&&!t.validator.test(e)||(t.validator==="onlyAutocompleteItems"||t.validator===void 0&&!t.allowCustom)&&!((o=f.value)!=null&&o.includes(e))||typeof t.validator=="function"&&!t.validator(e,f.value)){B();return}l.value.push(e),a.value="",s.value=-1},W=e=>{!y.value||y.value.length==0||y.value.includes(e.charAt(e.length-1))&&V(e.slice(0,e.length-1))},U=e=>{l.value.splice(e,1)},O=v(null),K=()=>{var e;(e=O.value)==null||e.scrollTo(O.value.scrollWidth,0),h("update:modelValue",l.value)};z(l,()=>Q(K),{deep:!0}),X(K);const w=v(!1);let M=null;const Y=()=>{a.value.length===0&&l.value.length>0&&(w.value?(M&&clearTimeout(M),w.value=!1,U(l.value.length-1)):(w.value=!0,M&&clearTimeout(M),M=setTimeout(()=>w.value=!1,3e3)))},R=`tag-input${Math.random().toString(36).substring(7)}`;return(e,o)=>(i(),r(S,null,[m("label",{for:R},[m("ul",{class:L(["tags",{duplicate:b.value,focused:_.value,noMatchingTag:x.value,singleLine:e.singleLine}]),ref_key:"tagsUl",ref:O,tabindex:"0",style:q({"--tagBgColor":e.tagBgColor,"--tagTextColor":e.tagTextColor})},[(i(!0),r(S,null,N(l.value,(n,F)=>(i(),r("li",{key:n,class:L({duplicate:n===b.value,tag:T.value.length==0,del:w.value&&F===l.value.length-1,[T.value]:!0})},[k(C(n)+" ",1),m("button",{class:"delete",onClick:Z=>U(F)},"x",8,se)],2))),128)),m("div",ie,[P(m("input",ee({"onUpdate:modelValue":o[0]||(o[0]=n=>a.value=n),id:R,type:"text",autocomplete:"off",onKeydown:[o[1]||(o[1]=$(n=>V(s.value>-1?u.value[s.value]:a.value),["enter"])),o[2]||(o[2]=$(E(n=>V(a.value),["prevent"]),["tab"])),o[3]||(o[3]=$(n=>Y(),["delete"])),o[5]||(o[5]=$(E(n=>s.value=(s.value+1)%u.value.length,["prevent"]),["down"])),o[6]||(o[6]=$(E(n=>s.value=(u.value.length+s.value-1)%u.value.length,["prevent"]),["up"]))],onInput:o[4]||(o[4]=n=>W(a.value)),placeholder:"Enter tag",onFocus:o[7]||(o[7]=n=>_.value=!0),onBlur:o[8]||(o[8]=n=>_.value=!1)},e.inputProps),null,16),[[J,a.value]]),m("ul",re,[(i(!0),r(S,null,N(u.value,(n,F)=>(i(),r("li",{key:n,onClick:Z=>V(n),class:L({active:F===s.value})},C(n),11,ce))),128))])]),e.showCount?(i(),r("div",pe,[m("span",null,C(l.value.length),1),k(" tags ")])):H("",!0)],6)]),P(m("small",{class:"err"},C(e.validationMessage),513),[[te,x.value]])],64))}}),me=(g,c)=>{const t=g.__vccOpts||g;for(const[h,l]of c)t[h]=l;return t},ve=me(de,[["__scopeId","data-v-20235385"]]),_e={name:"TagInputDataType",components:{TagInput:ve},props:{parameter:Object},data(){return{tagsInputs:[]}},mounted(){},methods:{}};function ge(g,c,t,h,l,T){const a=p("tag-input",!0);return i(),r("div",null,[m("label",null," TagInput "+C(t.parameter.nombre),1),d(a,{modelValue:l.tagsInputs,"onUpdate:modelValue":c[0]||(c[0]=_=>l.tagsInputs=_)},null,8,["modelValue"])])}const fe=A(_e,[["render",ge]]),Ce={name:"TextInput",props:{parameter:Object}};function he(g,c,t,h,l,T){const a=p("CFormInput");return i(),r("div",null,[m("label",null,"TextInput "+C(t.parameter.nombre),1),d(a,{placeholder:"Complete este campo..."})])}const Ie=A(Ce,[["render",he]]),Te={name:"createFicha",components:{MultiSelectInput:ue,TagInput:fe,TextInput:Ie},data(){return{template:this.$store.state.template.parameters}},mounted(){console.log(this.template)}},ye={key:0},be={key:1},xe={key:2};function ke(g,c,t,h,l,T){const a=p("CCardHeader"),_=p("CCardTitle"),s=p("TextInput"),y=p("TagInput"),b=p("MultiSelectInput"),D=p("CForm"),x=p("CButton"),B=p("CCardBody"),f=p("CCard");return i(),le(f,null,{default:I(()=>[d(a,null,{default:I(()=>[k("Nuevo Template")]),_:1}),d(B,null,{default:I(()=>[d(_,null,{default:I(()=>[k("Ingreso de datos de template")]),_:1}),d(D,{class:"mt-4"},{default:I(()=>[(i(!0),r(S,null,N(l.template,u=>(i(),r("div",{key:u.id,class:"mb-3"},[u.tipoparametro_id===1?(i(),r("div",ye,[d(s,{parameter:u},null,8,["parameter"])])):u.tipoparametro_id===2&&u.tipodato_id===null?(i(),r("div",be,[d(y,{parameter:u},null,8,["parameter"])])):u.tipoparametro_id===2&&u.tipodato_id!==null?(i(),r("div",xe,[d(b,{parameter:u},null,8,["parameter"])])):H("",!0)]))),128))]),_:1}),d(x,{color:"dark"},{default:I(()=>[k("Guardar")]),_:1})]),_:1})]),_:1})}const Me=A(Te,[["render",ke]]);export{Me as default};
